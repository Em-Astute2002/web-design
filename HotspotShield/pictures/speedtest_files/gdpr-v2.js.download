function Gdpr(config){this.config=config;}
Gdpr.prototype={constructor:Gdpr,userAgreementType:false,popup:false,baseDomain:false,agreedFromFirstScreen:false,reportObject:{'agreement_type':false,'agreement_version':false,'agreement_time':false,'agreement_timezone':false},IS_GDPR_ENABLED:true,GDPR_VERSION:'2.0',URL_GEO_API_SERVICE:'https://d1bqg89p9tb8wl.cloudfront.net/ipinfo',URL_HSS_LOG_SERVICE:'https://d1dhfi1ghx265k.cloudfront.net/gdpr/agreement/cookies',MAIN_BASE_DOMAIN:'.hotspotshield.com',MAIN_URL:'https://order.hotspotshield.com/',GDPR_ZONE:{AT:'Austria',BE:'Belgium',BG:'Bulgaria',HR:'Croatia',CY:'Cyprus',CZ:'Czech Republic',DK:'Denmark',EE:'Estonia',FI:'Finland',FR:'France',DE:'Germany',GB:'United Kingdom',GR:'Greece',HU:'Hungary',IE:'Ireland',IT:'Italy',LV:'Latvia',LT:'Lithuania',LU:'Luxembourg',MT:'Malta',NL:'Netherlands',PL:'Poland',PT:'Portugal',RO:'Romania',SK:'Slovakia',SI:'Slovenia',ES:'Spain',SE:'Sweden'},COOKIE:{KEYS:{GDPR_VERSION:'_GDPR_user_agreement_version',AGREEMENT_TYPE:'_GDPR_user_agreement',AGREEMENT_TIME:'_GDPR_user_agreement_time',AGREEMENT_ZONE:'_GDPR_user_agreement_timezone'},VALUES:{AGREEMENT_TYPE_FULL:'full',AGREEMENT_TYPE_NOT_REQUIRED:'notRequireAgreement'}}};Gdpr.prototype.init=function(){this.loadJs();if(this.IS_GDPR_ENABLED){if(location.hostname.indexOf('localhost')>=0){this.baseDomain='localhost';}
var agreedVersion=this.getCookie(this.COOKIE.KEYS.GDPR_VERSION);this.userAgreementType=this.getLocalUserAgr(agreedVersion);this.reviewUserAgr();}};Gdpr.prototype.getLocalUserAgr=function(agreedVersion){if(this.baseDomain==='localhost'){return this.COOKIE.VALUES.AGREEMENT_TYPE_FULL;}
if(agreedVersion!==this.GDPR_VERSION){return false;}
var userAgreementType=this.getCookie(this.COOKIE.KEYS.AGREEMENT_TYPE);if(userAgreementType!==this.COOKIE.VALUES.AGREEMENT_TYPE_FULL){return false;}
if(!this.getCookie('hprchs_vstr_hsh')){return false;}
return userAgreementType;};Gdpr.prototype.reviewUserAgr=function(){if(!this.userAgreementType){this.removeAllCookies();this.getUsersLocation();}};Gdpr.prototype.checkBlackList=function(){var blackList=this.config.ignoreList;if(blackList){var result=false;var currentUrl=window.location.pathname;[].forEach.call(blackList,function(url){if(currentUrl.indexOf(url)===0){result=true;}});}
return result;};Gdpr.prototype.getUsersLocation=function(){var userCountry=this.getCookie('af_country');if(userCountry){this.callbackUsersLocation({country_code:userCountry});return false;}
if(this.baseDomain==='localhost'){var fakeData={'country_code':'US'};this.callbackUsersLocation(fakeData);}else{this.runGAPI();}};Gdpr.prototype.callbackUsersLocation=function(config){var result;var userLocated=config.country_code;if(userLocated in this.GDPR_ZONE){result='requireAgreement';}else{result=this.COOKIE.VALUES.AGREEMENT_TYPE_NOT_REQUIRED;}
if(result===this.COOKIE.VALUES.AGREEMENT_TYPE_NOT_REQUIRED){this.userAgreementType=result;this.loadJs();this.setCookie(this.COOKIE.KEYS.AGREEMENT_TYPE,result);}else if(result==='requireAgreement'){var $this=this;setTimeout(function(){$this.uiShowPopup();},300);}};Gdpr.prototype.loadJs=function(){var loadedScripts={};var $this=this;[].forEach.call(this.config.scripts,function(script){if(script.name==='sentry'){$this.loadJsSentry(script.id);loadedScripts[script.name]=1;}});[].forEach.call(this.config.scripts,function(script){if(script.name==='gtm'){$this.loadJsGtm(script.id);loadedScripts[script.name]=1;}});[].forEach.call(this.config.scripts,function(script){if(!(script.name in loadedScripts)){if(script.url&&script.url!=='undefined'&&script.url!==''){$this.loadJsScript(script.url);loadedScripts[script.name]=1;}}});};Gdpr.prototype.loadJsScript=function(url){var script=document.createElement('script');script.setAttribute('crossorigin','anonymous');script.setAttribute('src',url);document.getElementsByTagName('head')[0].appendChild(script);};Gdpr.prototype.loadJsSentry=function(id){var script=document.createElement('script');script.setAttribute('crossorigin','anonymous');script.setAttribute('src','https://cdn.ravenjs.com/3.17.0/raven.min.js');script.setAttribute('onload',"Raven.config('"+id+"').install();");document.getElementsByTagName('head')[0].appendChild(script);};Gdpr.prototype.loadJsGtm=function(id){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-'+id);};Gdpr.prototype.uiShowPopup=function(){var $this=this;this.getHtml();document.body.appendChild(this.popup);var btnAccept=document.getElementById('gdpr_popup_btn_accept');btnAccept.addEventListener('click',function(){$this.userEventAccepted();});var btnsShowPrivacy=document.getElementById('gdpr_popup_btn_show_privacy');btnsShowPrivacy.addEventListener('click',function(){$this.userEventShowTerms();});};Gdpr.prototype.getHtml=function(){var css=document.createElement('style');css.innerHTML='#gdpr_popup { position: fixed; left: 0; bottom: 0; right: 0; background: #f5f7f9; color: #4F555F; font-family: "Gordita", sans-serif; font-size: 14px; line-height: 16px; padding: 17px 23px; z-index: 1000000001; margin: 0; } #gdpr_popup a { color: #4F555F; text-decoration: underline; cursor: pointer; } #gdpr_popup a:hover { color: #4F555F; text-decoration: none; } #gdpr_popup_btn_accept { display: inline-block; float: right; color: #2FA6F8; font-family: "Gordita", sans-serif; font-size: 14px; font-weight: 500; line-height: 16px; cursor: pointer; } #gdpr_popup_btn_accept:hover { text-decoration: underline; } @media (max-width: 767px) { #gdpr_popup { font-size: 12px; line-height: 14px; padding: 17px; } #gdpr_popup_btn_accept { display: block; padding-top: 30px; font-size: 13px; line-height: 15px; } }';document.getElementsByTagName('head')[0].appendChild(css);var html=document.createElement('div');html.id='AF_GDPR';html.innerHTML='<div id="gdpr_popup">This website uses cookies to improve the user experience. To learn more about our cookie policy or withdraw from it, please check our <a id="gdpr_popup_btn_show_privacy">Privacy policy</a> <span id="gdpr_popup_btn_accept">Accept</span></div>';this.popup=html;};Gdpr.prototype.uiClosePopup=function(){this.popup.style.display='none';};Gdpr.prototype.userEventShowTerms=function(){var url=this.config.termsUrl;if(url){var win=window.open(url,'_blank');win.focus();}};Gdpr.prototype.userEventAccepted=function(){this.userAgreementType=this.COOKIE.VALUES.AGREEMENT_TYPE_FULL;var agreement_time=new Date().getTime();var agreement_timezone=new Date().toString().match(/([A-Z]+[\+-][0-9]+)/)[1];var year=365;this.reportObject.agreement_type=this.userAgreementType;this.reportObject.agreement_version=this.GDPR_VERSION;this.reportObject.agreement_time=agreement_time;this.reportObject.agreement_timezone=agreement_timezone;var cookies=[{name:this.COOKIE.KEYS.AGREEMENT_TYPE,value:this.userAgreementType,expDays:year},{name:this.COOKIE.KEYS.GDPR_VERSION,value:this.GDPR_VERSION,expDays:year},{name:this.COOKIE.KEYS.AGREEMENT_TIME,value:agreement_time,expDays:year},{name:this.COOKIE.KEYS.AGREEMENT_ZONE,value:agreement_timezone,expDays:year}];for(var i=0;i<cookies.length;i++){this.setCookie(cookies[i].name,cookies[i].value,cookies[i].expDays);}
var visitorHash={name:'hprchs_vstr_hsh',value:this.getCookie('hprchs_vstr_hsh'),expDays:year};cookies.push(visitorHash);this.setCookieForMainDomain(cookies);this.uiClosePopup();this.sendAgreement();};Gdpr.prototype.setCookieForMainDomain=function(cookies){if(!cookies){return;}
if(window.location.host.indexOf(this.MAIN_BASE_DOMAIN)!==-1){return;}
var queryArray=[];for(var i=0;i<cookies.length;i++){for(var key in cookies[i]){if(!cookies[i].hasOwnProperty(key)){continue;}
var query='af_params['+i+']['+key+']='+cookies[i][key];queryArray.push(query);}}
var queryString=queryArray.join('&');var img=document.createElement('img');img.src=this.MAIN_URL+'gdpr/agreement/set-cookies?'+queryString;};Gdpr.prototype.setCookie=function(name,value,exdays,path){if(!this.baseDomain){var domains=location.hostname.split('.');var len=domains.length;this.baseDomain="; secure; domain=."+domains[len-2]+'.'+domains[len-1];}
var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires='; expires='+d.toUTCString();var pathBlock=path?'; path='+path:'; path=/';document.cookie=name+'='+value+expires+this.baseDomain+pathBlock;};Gdpr.prototype.getCookie=function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length);}
return false;};Gdpr.prototype.sendAgreement=function(){if(this.baseDomain!=='localhost'){var $this=this;var _ajax=new XMLHttpRequest();_ajax.open("POST",this.URL_HSS_LOG_SERVICE,true);_ajax.send(JSON.stringify($this.reportObject));}};Gdpr.prototype.runGAPI=function(){var _ajax=new XMLHttpRequest();var $this=this;_ajax.open('GET',this.URL_GEO_API_SERVICE,true);_ajax.onreadystatechange=function(){if(_ajax.readyState===XMLHttpRequest.DONE&&_ajax.status===200){var config=JSON.parse(_ajax.responseText);$this.callbackUsersLocation(config);}};_ajax.send();};Gdpr.prototype.removeAllCookies=function(){this.setCookie(this.COOKIE.KEYS.AGREEMENT_TYPE,'');this.setCookie(this.COOKIE.KEYS.GDPR_VERSION,'');this.setCookie(this.COOKIE.KEYS.AGREEMENT_TIME,'');this.setCookie(this.COOKIE.KEYS.AGREEMENT_ZONE,'');};